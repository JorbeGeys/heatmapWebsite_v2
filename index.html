<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>C.A.V.A. - Drone Trash Detection</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/style.css">
  <link rel="stylesheet" href="https://use.typekit.net/gof2udx.css">
  <link rel="stylesheet" href="https://use.typekit.net/gof2udx.css">

</head>
<body>
  <div id="titleContainer">
    <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="360" viewBox="0 0 1687.2 360">
      <path id="Path_1" data-name="Path 1" d="M347.5,272.8c4.2,0,6.6-2.4,6.6-6.6s-2.4-6.6-6.6-6.6-6.6,2.4-6.6,6.6S343.3,272.8,347.5,272.8ZM57.1,391c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S57.1,386.8,57.1,391Zm1.2,27c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S58.3,413.8,58.3,418Zm0-54c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S58.3,359.8,58.3,364Zm4.8,79.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S63.1,439.6,63.1,443.8Zm0-105.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S63.1,334,63.1,338.2Zm8.4,131.4c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S71.5,465.4,71.5,469.6Zm0-157.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S71.5,308.2,71.5,312.4ZM84.1,494.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S84.1,490,84.1,494.2Zm0-206.4c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S84.1,283.6,84.1,287.8Zm16.8,228c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S100.9,511.6,100.9,515.8Zm0-249.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S100.9,262,100.9,266.2Zm19.8,267.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S120.7,529.6,120.7,533.8Zm0-285.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S120.7,244,120.7,248.2Zm22.8,299.4c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S143.5,543.4,143.5,547.6Zm0-313.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S143.5,230.2,143.5,234.4Zm25.2,322.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S168.7,553,168.7,557.2Zm0-332.4c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S168.7,220.6,168.7,224.8Zm27,337.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S195.7,558.4,195.7,562.6Zm0-343.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S195.7,215.2,195.7,219.4Zm27,345c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S222.7,560.2,222.7,564.4Zm0-346.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S222.7,213.4,222.7,217.6Zm27,345c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S249.7,558.4,249.7,562.6Zm0-343.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S249.7,215.2,249.7,219.4Zm26.4,5.4c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S276.1,220.6,276.1,224.8Zm.6,332.4c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S276.7,553,276.7,557.2Zm24-322.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S300.7,230.2,300.7,234.4Zm.6,313.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S301.3,543.4,301.3,547.6Zm21-299.4c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S322.3,244,322.3,248.2Zm1.2,285.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S323.5,529.6,323.5,533.8Zm18.6-18c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S342.1,511.6,342.1,515.8Zm14.4-228c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S356.5,283.6,356.5,287.8Zm1.2,206.4c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S357.7,490,357.7,494.2Zm9.6-181.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S367.3,308.2,367.3,312.4Zm1.8,157.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S369.1,465.4,369.1,469.6Zm6.6-25.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S375.7,439.6,375.7,443.8Zm108.6,90.6c4.2,0,6.6-2.4,6.6-6.6s-2.4-6.6-6.6-6.6-6.6,2.4-6.6,6.6S480.1,534.4,484.3,534.4Zm-34.8,21c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S449.5,551.2,449.5,555.4Zm0-27.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S449.5,523.6,449.5,527.8Zm28.2,27.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S477.7,551.2,477.7,555.4ZM678.1,233.2c4.2,0,6.6-2.4,6.6-6.6s-2.4-6.6-6.6-6.6-6.6,2.4-6.6,6.6S673.9,233.2,678.1,233.2Zm-141,322.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S537.1,551.2,537.1,555.4Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S547.3,526,547.3,530.2ZM557.5,505c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S557.5,500.8,557.5,505Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S567.7,475.6,567.7,479.8Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S577.9,450.4,577.9,454.6Zm10.2-25.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S588.1,424.6,588.1,428.8Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S598.3,399.4,598.3,403.6Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S608.5,374.2,608.5,378.4Zm7.2,50.4c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S615.7,424.6,615.7,428.8Zm3-75.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S618.7,349,618.7,353.2ZM628.9,328c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S628.9,323.8,628.9,328Zm10.2-25.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S639.1,298,639.1,302.2Zm4.8,126.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S643.9,424.6,643.9,428.8ZM649.3,277c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S649.3,272.8,649.3,277Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S659.5,247.6,659.5,251.8Zm12,177c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S671.5,424.6,671.5,428.8Zm12-177c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S683.5,247.6,683.5,251.8ZM693.7,277c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S693.7,272.8,693.7,277Zm6,151.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S699.7,424.6,699.7,428.8Zm4.2-126.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S703.9,298,703.9,302.2ZM714.1,328c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S714.1,323.8,714.1,328Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S724.3,349,724.3,353.2Zm3,75.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S727.3,424.6,727.3,428.8Zm7.2-50.4c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S734.5,374.2,734.5,378.4Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S744.7,399.4,744.7,403.6Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S754.9,424.6,754.9,428.8Zm10.2,25.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S765.1,450.4,765.1,454.6Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S775.3,475.6,775.3,479.8ZM785.5,505c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S785.5,500.8,785.5,505Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S795.7,526,795.7,530.2Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S805.9,551.2,805.9,555.4Zm94.8-21c4.2,0,6.6-2.4,6.6-6.6s-2.4-6.6-6.6-6.6-6.6,2.4-6.6,6.6S896.5,534.4,900.7,534.4Zm-34.8,21c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S865.9,551.2,865.9,555.4Zm0-27.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S865.9,523.6,865.9,527.8Zm28.2,27.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S894.1,551.2,894.1,555.4Zm337.2-322.2c4.2,0,6.6-2.4,6.6-6.6s-2.4-6.6-6.6-6.6-6.6,2.4-6.6,6.6S1227.1,233.2,1231.3,233.2Zm-275.4-6.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S955.9,222.4,955.9,226.6Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S966.1,247.6,966.1,251.8ZM976.3,277c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S976.3,272.8,976.3,277Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S986.5,298,986.5,302.2Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S996.7,323.2,996.7,327.4Zm10.2,25.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1006.9,349,1006.9,353.2Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1017.1,374.2,1017.1,378.4Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1027.3,399.4,1027.3,403.6Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1037.5,424.6,1037.5,428.8Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1047.7,449.8,1047.7,454Zm10.2,25.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1057.9,475.6,1057.9,479.8Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1068.1,500.8,1068.1,505Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1078.3,526,1078.3,530.2Zm12,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1090.3,551.2,1090.3,555.4Zm12-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1102.3,526,1102.3,530.2Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1112.5,500.8,1112.5,505Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1122.7,475.6,1122.7,479.8Zm10.2-25.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1132.9,449.8,1132.9,454Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1143.1,424.6,1143.1,428.8Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1153.3,399.4,1153.3,403.6Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1163.5,374.2,1163.5,378.4Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1173.7,349,1173.7,353.2Zm10.2-25.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1183.9,323.2,1183.9,327.4Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1194.1,298,1194.1,302.2Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1204.3,272.8,1204.3,277Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1214.5,247.6,1214.5,251.8Zm106.8,282.6c4.2,0,6.6-2.4,6.6-6.6s-2.4-6.6-6.6-6.6-6.6,2.4-6.6,6.6S1317.1,534.4,1321.3,534.4Zm-34.8,21c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1286.5,551.2,1286.5,555.4Zm0-27.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1286.5,523.6,1286.5,527.8Zm28.2,27.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1314.7,551.2,1314.7,555.4Zm200.4-322.2c4.2,0,6.6-2.4,6.6-6.6s-2.4-6.6-6.6-6.6-6.6,2.4-6.6,6.6S1510.9,233.2,1515.1,233.2Zm-141,322.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1374.1,551.2,1374.1,555.4Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1384.3,526,1384.3,530.2Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1394.5,500.8,1394.5,505Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1404.7,475.6,1404.7,479.8Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1414.9,450.4,1414.9,454.6Zm10.2-25.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1425.1,424.6,1425.1,428.8Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1435.3,399.4,1435.3,403.6Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1445.5,374.2,1445.5,378.4Zm7.2,50.4c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1452.7,424.6,1452.7,428.8Zm3-75.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1455.7,349,1455.7,353.2Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1465.9,323.8,1465.9,328Zm10.2-25.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1476.1,298,1476.1,302.2Zm4.8,126.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1480.9,424.6,1480.9,428.8Zm5.4-151.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1486.3,272.8,1486.3,277Zm10.2-25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1496.5,247.6,1496.5,251.8Zm12,177c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1508.5,424.6,1508.5,428.8Zm12-177c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1520.5,247.6,1520.5,251.8Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1530.7,272.8,1530.7,277Zm6,151.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1536.7,424.6,1536.7,428.8Zm4.2-126.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1540.9,298,1540.9,302.2Zm10.2,25.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1551.1,323.8,1551.1,328Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1561.3,349,1561.3,353.2Zm3,75.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1564.3,424.6,1564.3,428.8Zm7.2-50.4c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1571.5,374.2,1571.5,378.4Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1581.7,399.4,1581.7,403.6Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1591.9,424.6,1591.9,428.8Zm10.2,25.8c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1602.1,450.4,1602.1,454.6Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1612.3,475.6,1612.3,479.8Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1622.5,500.8,1622.5,505Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1632.7,526,1632.7,530.2Zm10.2,25.2c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1642.9,551.2,1642.9,555.4Zm94.8-21c4.2,0,6.6-2.4,6.6-6.6s-2.4-6.6-6.6-6.6-6.6,2.4-6.6,6.6S1733.5,534.4,1737.7,534.4Zm-34.8,21c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1702.9,551.2,1702.9,555.4Zm0-27.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1702.9,523.6,1702.9,527.8Zm28.2,27.6c0,4.2,2.4,6.6,6.6,6.6s6.6-2.4,6.6-6.6-2.4-6.6-6.6-6.6S1731.1,551.2,1731.1,555.4Z" transform="translate(-57.1 -211)"/>
    </svg>
  </div>

  <div id="smallTitleAndText">
    <div id="smallTitle">
      <p>Clean. Artificial. Vision. Aerial.</p>
    </div>

    <div id="smallText">
      <p>Elke samenkomst zorgt op korte tijd voor enorm veel afval dat overal blijft liggen. C.A.V.A. brengt dit in kaart voor de organisatie.</p>
    </div>
  </div>

  <div id="explenationWithImage">
    <p id="generalExplanation">C.A.V.A. maakt gebruik van AI-gestuurde computervisie-technologie om afval op de grond te detecteren, in kaart te brengen en te monitoren. Op die manier helpt het platform mee aan schonere en efficiëntere omgevingen. Deze oplossing is ideaal voor festivalorganisatoren, marktverantwoordelijken en iedereen die grote openluchtevenementen beheert en meer inzicht wil krijgen in hun afvalbeheersysteem.
    </p>
    <img id="explenationImage" src="./static/images/Screenshot_googleMaps_heatmap.jpeg" alt="Image failed to load.">
  </div>


  <div class="dropZones">
    <div class="drop-zone" id="imageDropZone" onclick="document.getElementById('imageUpload').click()">
      <p>Gebruik top-down beelden van maximaal 7 meter hoogte, ingediend in originele volgorde.
</p>
      <div class="drop-message">
        <p id="imageDropMessageText">SELECT IMAGES HERE</p>
      </div>
      <p>Min. 10 foto's.</p>
    </div>

    <div class="drop-zone" id="csvDropZone" onclick="document.getElementById('csvUpload').click()">
      <p>Upload de CSV-flightdata van de vlucht waarin de beelden zijn genomen.</p>
      <div class="drop-message yellow">
        <p id="csvDropMessageText">SELECT CSV HERE</p>
      </div>
      <p>Max. 1 bestand.</p>
    </div>

    <div > <!--id="submitBtnDots"-->
      <div id="submitButton" onclick="displayImages()"><p>SUBMIT & VISUALIZE</p></div>
    </div>
  </div>

  <input type="file" id="imageUpload" class="dontShow" multiple>
  <input type="file" id="csvUpload" class="dontShow" accept=".csv" />

  <p id="loadingStatus" class="dontShow"></p>

  <div id="loadingAnimation">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" width="200" height="200">
      <defs>
        <path id="motion-path" d="M52,100 A24,24 0 0 1 100,100 A24,24 0 0 0 148,100 A24,24 0 0 0 100,100 A24,24 0 0 1 52,100 z" />
      </defs>

      <ellipse rx="8" ry="8" fill="black">
        <animateMotion repeatCount="indefinite" calcMode="spline" dur="1400ms" keyTimes="0; 0.5; 1" keyPoints="0; 0.5; 1" keySplines="0.6,0.3,0.4,0.7; 0.6,0.3,0.4,0.7" rotate="auto">
          <mpath href="#motion-path" />
        </animateMotion>

        <animate attributeName="rx" repeatCount="indefinite" dur="1400ms" keyTimes="0; .25; .5; .75; 1" values="8; 8.4; 8; 8.4; 8" />

        <animate attributeName="ry" repeatCount="indefinite" dur="1400ms" keyTimes="0; .25; .5; .75; 1" values="8; 7.6; 8; 7.6; 8" />
      </ellipse>

      <ellipse rx="8" ry="8" fill="black">
        <animateMotion repeatCount="indefinite" calcMode="spline" dur="1400ms" begin="-466.6666ms" keyTimes="0; 0.5; 1" keyPoints="0; 0.5; 1" keySplines="0.6,0.3,0.4,0.7; 0.6,0.3,0.4,0.7" rotate="auto">
          <mpath href="#motion-path" />
        </animateMotion>

        <animate attributeName="rx" repeatCount="indefinite" dur="1400ms" keyTimes="0; .25; .5; .75; 1" values="8; 8.4; 8; 8.4; 8" begin="-466.6666ms" />

        <animate attributeName="ry" repeatCount="indefinite" dur="1400ms" keyTimes="0; .25; .5; .75; 1" values="8; 7.6; 8; 7.6; 8" begin="-466.6666ms" />
      </ellipse>

      <ellipse rx="8" ry="8" fill="black">
        <animateMotion repeatCount="indefinite" calcMode="spline" dur="1400ms" begin="-933.3333ms" keyTimes="0; 0.5; 1" keyPoints="0; 0.5; 1" keySplines="0.6,0.3,0.4,0.7; 0.6,0.3,0.4,0.7" rotate="auto">
          <mpath href="#motion-path" />
        </animateMotion>

        <animate attributeName="rx" repeatCount="indefinite" dur="1400ms" keyTimes="0; .25; .5; .75; 1" values="8; 8.4; 8; 8.4; 8" begin="-933.3333ms" />

        <animate attributeName="ry" repeatCount="indefinite" dur="1400ms" keyTimes="0; .25; .5; .75; 1" values="8; 7.6; 8; 7.6; 8" begin="-933.3333ms" />
      </ellipse>
    </svg>
  </div>

  <!-- Progress bar container -->
  <div id="progress-container" class="dontShow">
    <div id="progress-bar"></div>
  </div>


  <div id="mainBody" class="dontShow">
    <div id="heatmapHero">
      <div id="heatmapContainer"></div>
    </div>

    <h2 id="heatmapsTitle" class="mosaicOrImagesTitle">HEATMAPS</h2>
    
    <div id="mapAndBtn">
      <div id="content">
        <div class="contentItem">
          <div class="circle low"></div>
          <p>LAAG</p>
        </div>
        <div class="contentItem">
          <div class="circle mid-low"></div>
          <p>MID-LAAG</p>
        </div>
        <div class="contentItem">
          <div class="circle mid"></div>
          <p>MID</p>
        </div>
        <div class="contentItem">
          <div class="circle mid-high"></div>
          <p>MID-HOOG</p>
        </div>
        <div class="contentItem">
          <div class="circle high"></div>
          <p>HOOG</p>
        </div>
        <div class="contentItem">
          <div class="square"></div>
          <p>ZONE</p>
        </div>
      </div>
      <div id="maps"></div>
      <div id="mapBtns">
        <button id="exportGeoJSON" onclick="exportToKML()"><p>DOWNLOAD PUNTEN</p></button>
        <a id="googleMyMaps" href="https://www.google.com/maps/d/" target="_blank"><p>OPEN GOOGLE MY MAPS</p></a>
      </div>
    </div>
    <p id="downloadPointsText">Download de punten als een KML-bestand en upload ze naar Google My Maps om ze altijd bij de hand te hebben op elk apparaat.</p>
  <script>(g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${
  c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})
      ({key: "AIzaSyCObA6sw3zvc9_kxFVqf9xmvh3lIViUSdg", v: "weekly"});</script>

    

    <div class="mosaicOrImages">
      <div>
        <h2 class="mosaicOrImagesTitle">STITCHED MOSAIC</h2>
        <p>
          Een samengestelde mozaïekafbeelding is een grote, samengestelde afbeelding die naadloos meerdere kleinere, overlappende beelden combineert tot één doorlopend geheel. Gebruikers kunnen hiermee grote gebieden visualiseren—zoals satellietbeelden, microscoopslides of architecturale plannen—in hoge detailgraad zonder het overzicht tussen verschillende delen te verliezen.
        
        </p>
      </div>
      <div id="mosaicContainer"></div>
    </div>

    <div class="mosaicOrImages">
      <div id="carouselWrapper">
        <button id="prevBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="45" viewBox="0 0 30 45">
            <g id="Group_1" data-name="Group 1" transform="translate(-100 -2748)">
              <circle id="Ellipse_4" data-name="Ellipse 4" cx="7.5" cy="7.5" r="7.5" transform="translate(100 2763)" fill="#fac002"/>
              <circle id="Ellipse_5" data-name="Ellipse 5" cx="7.5" cy="7.5" r="7.5" transform="translate(115 2748)" fill="#fac002"/>
              <circle id="Ellipse_6" data-name="Ellipse 6" cx="7.5" cy="7.5" r="7.5" transform="translate(115 2778)" fill="#fac002"/>
            </g>
          </svg>
        </button>

        <div id="imageContainer"></div>

        <button id="nextBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="45" viewBox="0 0 30 45">
            <g id="Group_2" data-name="Group 2" transform="translate(-1050 -2748)">
              <circle id="Ellipse_1" data-name="Ellipse 1" cx="7.5" cy="7.5" r="7.5" transform="translate(1065 2763)" fill="#fac002"/>
              <circle id="Ellipse_2" data-name="Ellipse 2" cx="7.5" cy="7.5" r="7.5" transform="translate(1050 2748)" fill="#fac002"/>
              <circle id="Ellipse_3" data-name="Ellipse 3" cx="7.5" cy="7.5" r="7.5" transform="translate(1050 2778)" fill="#fac002"/>
            </g>
          </svg>
        </button>
      </div>
      <h2>ANNOTATED IMAGES</h2>
    </div>
  </div>

  <footer>
    <p>© 2025 C.A.V.A. Alle rechten voorbehouden. Alle gegevens, afbeeldingen en informatie die naar deze site worden geüpload, zijn strikt vertrouwelijk en zullen nooit worden opgeslagen, verkocht of gedeeld.
</p>
    </footer>

  <div id="fullscreenOverlay" class="fullscreen-overlay">
    <span class="close-button" onclick="closeFullscreenImage()">&times;</span>
    <img id="fullscreenImage" src="" alt="Fullscreen Image">
  </div>

  <script>
  const imageDropZone = document.getElementById('imageDropZone');
  const csvDropZone = document.getElementById('csvDropZone');
  const fileInput = document.getElementById('imageUpload');
  const csvInput = document.getElementById('csvUpload');
  const imageContainer = document.getElementById('imageContainer');
  const mosaicContainer = document.getElementById('mosaicContainer');
  const heatmapContainer = document.getElementById('heatmapContainer');
  const loadingStatus = document.getElementById('loadingStatus');
  const fullscreenOverlay = document.getElementById('fullscreenOverlay');
  const fullscreenImage = document.getElementById('fullscreenImage');
  const dropZonesContainer = document.querySelector('.dropZones');
  const submitButton = document.getElementById('submitButton');
  const mainBody = document.getElementById('mainBody');
  const loadingAnimation = document.getElementById('loadingAnimation');
  let droppedCsv = null;
  let droppedImages = [];
  let originalHeight = "3840px";
  let latSum = 0;
  let lngSum = 0;
  let map_center_x;
  let map_center_y;
  let clusterCenters;
  let mapShapePoints;
  const timePerImage = 550;



  const progressContainer = document.getElementById('progress-container');
  const progressBar = document.getElementById('progress-bar');



    //google maps
    /**
    * @license
    * Copyright 2019 Google LLC. All Rights Reserved.
    * SPDX-License-Identifier: Apache-2.0
    */
    let map;
    let estimatedCoords = [];

    async function initMap(coords = {}) {
      const { Map } = await google.maps.importLibrary("maps");

      // Use default values if coords.lat or coords.lng are not valid numbers
      const lat = typeof coords.lat === "number" && isFinite(coords.lat) ? coords.lat : -34.397;
      const lng = typeof coords.lng === "number" && isFinite(coords.lng) ? coords.lng : 150.644;

      const map = new Map(document.getElementById("maps"), {
        center: { lat, lng },
        zoom: 20,
      });

      const mapShape = new google.maps.Polygon({
        paths: mapShapePoints,
        strokeColor: "#FF0000",
        strokeOpacity: 0.8,
        strokeWeight: 2,
        fillColor: "#FF0000",
        fillOpacity: 0.35,
      });

      mapShape.setMap(map);


      function getColorForValue(value) {
        if (value <= 2) return "#0000FF";     // Blue (low)
        if (value <= 5) return "#4B8BFF";     // Light Blue (mid-low)
        if (value <= 7) return "#FFD700";     // Yellow (mid)
        if (value <= 10) return "#FF8C00";    // Orange (mid-high)
        return "#FF0000";                     // Red (high)
      }

      estimatedCoords = [
      [51.26606978861851, 4.609832256564229], [51.266082007485466, 4.609867191717625], [51.26608515662533, 4.609892758461326], [51.26608484861691, 4.609853829238785], [51.26610583045168, 4.609878220981482], [51.26607231739786, 4.60989135250024], [51.26608711185927, 4.609901053669149], [51.26607574991987, 4.60991336827978], [51.26607668312705, 4.609917312824018], [51.26608207270148, 4.609935326186513], [51.26608041160384, 4.609930790910371], [51.26607477858418, 4.609916045606688], [51.266080788688875, 4.609951696563461], [51.26608594502929, 4.609942828598706], [51.26607735736399, 4.609883436140536], [51.26605207465148, 4.609909358619088], [51.26607042179105, 4.609906358920909], [51.266065278458164, 4.609890751867326], [51.26604676068469, 4.60989369806033], [51.266046556230435, 4.6098635498081775], [51.266049886950924, 4.609869917232197], [51.26605206468277, 4.609876064298437], [51.26604138187698, 4.609873021862187], [51.26604598738584, 4.60985128724327], [51.2660365623749, 4.609862552601118]      
      ];

      estimatedCoords.forEach(coord => {
      coord.push(2);
    });

      console.log("estimatedCoords", estimatedCoords);

      // Build GeoJSON features from clusterCenters
      const features = clusterCenters.map((center, index) => ({
        type: "Feature",
        geometry: {
          type: "Point",
          coordinates: [center[1], center[0]], // Convert [lat, lng] → [lng, lat]
        },
        properties: {
          name: `Marker ${index + 1}`,
          value: center[2],
        },
      }));

      // Load the GeoJSON features into the map
      map.data.addGeoJson({
        type: "FeatureCollection",
        features: features,
      });

      // Optional: style the data layer
      map.data.setStyle((feature) => {
        const value = feature.getProperty("value");
        return {
          icon: {
            path: google.maps.SymbolPath.CIRCLE,
            scale: value,
            fillColor: getColorForValue(value),
            fillOpacity: 1,
            strokeWeight: 0,
          },
        };
      });
    }

    function exportToKML() {
      let kmlHeader = `<?xml version="1.0" encoding="UTF-8"?>
      <kml xmlns="http://www.opengis.net/kml/2.2">
        <Document>\n`;
      
      let kmlFooter = `  </Document>\n</kml>`;

      let kmlBody = estimatedCoords.map((coord, index) => `
        <Placemark>
          <name>Point ${index + 1}</name>
          <description>Value: ${coord[2]}</description>
          <Point>
            <coordinates>${coord[1]},${coord[0]},0</coordinates>
          </Point>
        </Placemark>
      `).join("\n");

      const kmlContent = kmlHeader + kmlBody + kmlFooter;
      const blob = new Blob([kmlContent], { type: 'application/vnd.google-earth.kml+xml' });
      const url = URL.createObjectURL(blob);

      const a = document.createElement("a");
      a.href = url;
      a.download = "estimated_coords.kml";
      a.click();

      URL.revokeObjectURL(url);
    }

    function openFullscreenImage(imageUrl) {
    fullscreenImage.src = imageUrl;
    fullscreenOverlay.style.display = 'flex';
    document.body.style.overflow = 'hidden';
  }

  function closeFullscreenImage() {
    fullscreenOverlay.style.display = 'none';
    fullscreenImage.src = '';
    document.body.style.overflow = 'auto';
  }

  fullscreenOverlay.addEventListener('click', (event) => {
    if (event.target === fullscreenOverlay) {
      closeFullscreenImage();
    }
  });

  document.addEventListener('keydown', (event) => {
    if (event.key === 'Escape' && fullscreenOverlay.style.display === 'flex') {
      closeFullscreenImage();
    }
  });

function updateProgress(handledImages, totalImages) {
  let progress = (handledImages / totalImages) * 100;
  progressBar.style.width = progress + "%";
  if( progress == 100){
    loadingStatus.textContent = "Processing detections and generating outputs...";
    loadingAnimation.style.display = 'flex';
    progressContainer.classList.add('dontShow');
  }
}


  async function displayImages() {

  dropZonesContainer.classList.add('dontShow');
  submitButton.classList.add('dontShow');
  loadingStatus.classList.remove('dontShow'); // Show the loading status
  progressContainer.classList.remove('dontShow');
  mainBody.classList.add('dontShow'); // Ensure mainBody is hidden initially

  imageContainer.innerHTML = "";
  mosaicContainer.innerHTML = "";
  heatmapContainer.innerHTML = "";
  loadingStatus.className = "loading";
  loadingStatus.textContent = "Uploading images and CSV...";

  //let imageFiles = fileInput.files;
  let imageFiles = [];
  if(fileInput.files && fileInput.files.length > 0){
    imageFiles = Array.from(fileInput.files).reverse();  //eerst array maken en dan reversen
  }
  else{
    console.log("droppedImages", droppedImages);
    imageFiles = droppedImages;
  }

  let csvFile = null;
  if(csvInput.files[0]){
    csvFile = csvInput.files[0];
  }
  else{
    csvFile = droppedCsv;
  }

  if (!imageFiles.length) {
    loadingStatus.textContent = "Please select some images first.";
    loadingStatus.className = "";

    dropZonesContainer.classList.remove('dontShow');
    submitButton.classList.remove('dontShow');
    return;
  }

  if (!csvFile) {
    loadingStatus.textContent = "Please upload a CSV file.";
    loadingStatus.className = "";

    dropZonesContainer.classList.remove('dontShow');
    submitButton.classList.remove('dontShow');
    return;
  }

  const formData = new FormData();
  for (let i = 0; i < imageFiles.length; i++) {
    formData.append('images', imageFiles[i]);
    
  }
  formData.append('csv_file', csvFile);

  try {
    for (let i = 0; i < imageFiles.length; i++) {
      setTimeout(() => {
        updateProgress(i+1, imageFiles.length);
      }, i * timePerImage);
    }
    
    const response = await fetch('http://127.0.0.1:5500/upload', {
      method: 'POST',
      body: formData
    });

    if (!response.ok) {
      throw new Error(`Server returned status ${response.status}`);
    }

    

    const data = await response.json();  // Wait until the full JSON is received
    loadingStatus.textContent = "Done!";
    loadingStatus.className = "success";
    loadingAnimation.style.display = 'none';

    loadingStatus.classList.add('dontShow');
    
    mainBody.classList.remove('dontShow');
    
    if (data.annotated_images_meta && Array.isArray(data.annotated_images_meta)) {
      data.annotated_images_meta.forEach((imgMeta, index) => {
        const annotationCount = imgMeta.bounding_boxes.length;
        const imgWrapper = document.createElement('div');

        const imgElement = document.createElement('img');
        imgElement.src = imgMeta.url;
        imgElement.alt = imgMeta.filename;
        imgElement.onclick = () => openFullscreenImage(imgElement.src);

        const annotationInfo = document.createElement('div');
        annotationInfo.style.color = '#00ffcc';
        annotationInfo.style.fontSize = '0.9em';
        annotationInfo.style.marginTop = '0.5em';

        const annotations = imgMeta.bounding_boxes || [];
        const count = annotations.length;

        annotationInfo.innerHTML = `<strong>${count} annotation${count !== 1 ? 's' : ''}</strong><br/>`;

        imgWrapper.appendChild(imgElement);
        imgWrapper.appendChild(annotationInfo);
        imageContainer.appendChild(imgWrapper);
      });
      for (let i = 0; i < data.annotated_images_meta.length; i++) {
        latSum += data.annotated_images_meta[i].drone_lat;
        lngSum += data.annotated_images_meta[i].drone_lng;
      }
      map_center_x = latSum / data.annotated_images_meta.length;
      map_center_y = lngSum / data.annotated_images_meta.length;
      initMap({ lat: map_center_x, lng: map_center_y })
    }

    if (data.mosaic && data.mosaic.web_png) {
      const mosaicImg = document.createElement('img');
      mosaicImg.src = `http://127.0.0.1:5500/mosaic/${data.mosaic.web_png}`;
      mosaicImg.alt = "Stitched Mosaic (Web Resolution)";
      mosaicImg.onclick = () => openFullscreenImage(mosaicImg.src);
      mosaicContainer.appendChild(mosaicImg);

      if (data.mosaic.full_tif) {
        const downloadLink = document.createElement('a');
        downloadLink.href = `http://127.0.0.1:5500/mosaic/${data.mosaic.full_tif}`;
        downloadLink.textContent = "Download full resolution mosaic (TIFF).";
        downloadLink.download = data.mosaic.full_tif;
        downloadLink.style.display = 'block';
        downloadLink.style.marginTop = '10px';
        downloadLink.style.textAlign = 'center';
        downloadLink.style.color = '#A3509F';
        downloadLink.style.textDecoration = 'underline';
        mosaicContainer.appendChild(downloadLink);
      }
    }
    else{
      mosaicContainer.innerHTML = "<p id='mosaicError'>The mosiac could not be loaded.</p>";
    }
    console.log("originalHeight", originalHeight);
    if (data.heatmap) {
      const heatmapImg = document.createElement('img');
      heatmapImg.src = `http://127.0.0.1:5500/mosaic/${data.heatmap}`;
      heatmapImg.alt = "Heatmap";
      heatmapImg.onclick = () => openFullscreenImage(heatmapImg.src);
      heatmapImg.onload = () => {
        originalHeight = heatmapImg.naturalHeight;
      };
      heatmapContainer.appendChild(heatmapImg);
    }

    if(data.clusterCenters){
      clusterCenters = data.clusterCenters;
      console.log("clusterCenters", data.clusterCenters);
    }

    if(data.mapShapePoints){
      mapShapePoints = data.mapShapePoints;
      console.log("mapShapePoints", mapShapePoints);
    }

  } catch (error) {
    loadingStatus.textContent = "An error occurred during upload or processing.";
    loadingStatus.className = "";
    console.error('❌ Error uploading files:', error);

    // --- START CHANGES: Re-show upload zones if an error occurs ---
    dropZonesContainer.classList.remove('dontShow');
    submitButton.classList.remove('dontShow');
    loadingStatus.classList.remove('dontShow'); // Keep loading status visible to show error
    // --- END CHANGES ---
  }
}

document.addEventListener('DOMContentLoaded', () => {
    const imageDropMessageText = document.getElementById('imageDropMessageText');
    const csvDropMessageText = document.getElementById('csvDropMessageText');


    imageDropZone.addEventListener('dragover', (e) => {
      e.preventDefault();
    });

    imageDropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        e.stopPropagation();
        const files = e.dataTransfer.files;
        droppedImages = files;
        console.log("droppedImages", droppedImages);
        handleImageFiles(files);
    });

    fileInput.addEventListener('change', (e) => {
        const files = e.target.files;
        handleImageFiles(files);
    });

    function handleImageFiles(files) {
        if (files.length > 0) {
            imageDropMessageText.textContent = `${files.length} IMAGE(S) UPLOADED`;
        } else {
            imageDropMessageText.textContent = 'DROP IMAGES HERE';
        }
    }


    // Handle dropped files for CSV
    csvDropZone.addEventListener('dragover', (e) => {
      e.preventDefault();
    });

    csvDropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        e.stopPropagation();
        const files = e.dataTransfer.files;
        droppedCsv = Array.from(files).find(file => file.type === 'text/csv' || file.name.endsWith('.csv'));
        handleCsvFiles(files);
    });

    // Handle files selected via CSV input
    csvInput.addEventListener('change', (e) => {
        const files = e.target.files;
        handleCsvFiles(files);
    });

    function handleCsvFiles(files) {
        const csvFile = Array.from(files).find(file => file.type === 'text/csv' || file.name.endsWith('.csv'));
        if (csvFile) {
            csvDropMessageText.textContent = csvFile.name;
        } else {
            csvDropMessageText.textContent = 'DROP CSV HERE';
        }
    }

    if (fileInput.files.length > 0) {
        handleImageFiles(fileInput.files);
    }
    if (csvInput.files.length > 0) {
        handleCsvFiles(csvInput.files);
    }

  const minScale = 0.5;
  const scaleMultiplier = 2;
  let scaleFactor = 1;
  window.addEventListener('scroll', () => {
    let scrollProgress = (window.scrollY-400) / document.getElementById('heatmapHero').clientHeight;
    scaleFactor = Math.max(0.5, 1 - (scrollProgress * scaleMultiplier * (1 - minScale)));
    document.querySelector('#heatmapContainer img').style.transform = `scale(${scaleFactor})`;
    document.querySelector('#heatmapContainer').style.height = `${originalHeight * scaleFactor *0.4}px`;
  });
});


const scrollAmount = 753.7;
document.querySelector('#prevBtn').addEventListener('click', () => {
    imageContainer.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
    console.log("prevBtn");
  });

  document.querySelector('#nextBtn').addEventListener('click', () => {
    console.log("nextBtn");
    imageContainer.scrollBy({ left: scrollAmount, behavior: 'smooth' });
  });

window.addEventListener('beforeunload', function (e) {
    //warning that changes are not saved
    e.preventDefault();
    e.returnValue = '';
  });
</script>
</body>
</html>